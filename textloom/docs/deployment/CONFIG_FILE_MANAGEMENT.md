# 配置文件管理规范

## 📋 配置文件清单

### 主要配置文件

| 文件名 | 用途 | 状态 | 备注 |
|--------|------|------|------|
| `.env` | 实际运行环境配置 | 🔒 **严格保护** | 包含敏感信息，不提交到git |
| `.env.example` | 配置模板 | ✅ 标准模板 | 完整配置模板，提交到git |

### 已废弃的文件
- `env.example` - 已合并到`.env.example`，已删除
- `.env.backup.example` - 备份相关配置，已删除

## 🛡️ 配置文件管理原则

### 1. 单一配置模板原则
- **只保留一个配置模板文件**: `.env.example`
- **禁止创建多个类似配置文件**: 如`env.example`, `.env.template`等
- **配置变更必须更新模板**: 新增配置项时同步更新`.env.example`

### 2. 安全保护原则
- **`.env`文件永远不提交**: 包含敏感信息，仅本地使用
- **模板文件不包含真实值**: `.env.example`中使用占位符
- **敏感信息标注**: 在模板中明确标注哪些是敏感配置

### 3. 版本控制原则
- **`.env`** → 加入`.gitignore`，不跟踪
- **`.env.example`** → 提交到git，跟踪变更

## 🔧 配置文件操作规范

### 初始化配置
```bash
# 1. 复制模板文件
cp .env.example .env

# 2. 编辑实际配置
nano .env
```

### 添加新配置项
1. **先在`.env.example`中添加新配置项**
2. **提供详细注释说明用途**
3. **使用占位符，不填入真实值**
4. **通知用户在`.env`中设置真实值**

### 配置文件修改检查清单
- [ ] 是否影响现有配置？
- [ ] 是否需要更新`.env.example`模板？
- [ ] 是否需要备份当前配置？
- [ ] 是否需要用户确认？
- [ ] 是否包含敏感信息？

## ⚠️ 严禁操作

### 🚫 严禁直接修改用户的`.env`文件
- 可能包含敏感的生产配置
- 修改错误可能导致服务中断
- 必须先征得用户明确同意

### 🚫 严禁创建多个配置模板
- 不要创建`env.example`, `.env.template`, `.env.sample`等
- 统一使用`.env.example`作为唯一模板
- 避免用户混淆哪个是正确版本

### 🚫 严禁在配置模板中包含真实值
- API密钥、数据库密码等必须使用占位符
- 使用`your-api-key`、`your-password`等明显占位符
- 提供生成安全值的命令示例

## 🔍 配置文件审查

### 定期检查项目
1. 确认只有一个配置模板文件存在
2. 检查`.env`文件是否被误提交
3. 验证新配置项都有适当注释
4. 确认敏感信息使用占位符

### 问题修复流程
1. **立即停止可能有害的操作**
2. **评估配置文件状态**
3. **征得用户确认后执行修复**
4. **记录问题和解决方案**

## 📝 变更记录

| 日期 | 变更内容 | 操作者 |
|------|----------|--------|
| 2025-08-20 | 建立配置文件管理规范，清理重复配置文件 | Claude Code |
| 2025-08-20 | 统一使用`.env.example`作为唯一配置模板 | Claude Code |

---

**重要提醒**: 任何涉及配置文件的修改都必须严格遵循此规范，确保系统配置的安全性和一致性。