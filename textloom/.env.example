# TextLoom Environment Configuration Template
# Copy this file to .env and update the values for your environment
# 复制此文件为 .env 并填入真实的配置值

###########################################
# Application Basic Settings
# 应用程序基本设置
###########################################
APP_NAME=TextLoom API
APP_VERSION=1.0.0

HOST=0.0.0.0
PORT=48095
DEBUG=false

###########################################
# Security Configuration
# 安全配置
###########################################
# Secret key for JWT tokens and encryption (generate a secure random string)
# JWT令牌和加密的密钥（请生成安全的随机字符串）
# Example: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-this-in-production

# JWT configuration
# JWT配置
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# JWT security settings
# JWT安全设置
JWT_ISSUER=textloom-api
JWT_REQUIRE_IAT=true
JWT_REQUIRE_EXP=true
JWT_VERIFY_SIGNATURE=true
JWT_LEEWAY=0

# Internal API token for testing endpoints
# 内部测试接口专用Token（仅用于dev/staging，生产环境请留空禁用）
INTERNAL_TEST_TOKEN=your-internal-test-token

###########################################
# CORS Configuration
# CORS配置
###########################################
# JSON array of allowed origins
# 允许的源域列表（JSON数组格式）
ALLOWED_ORIGINS=["http://localhost:3000","http://localhost:8080","https://your-frontend-domain.com"]
CORS_ALLOW_CREDENTIALS=true

###########################################
# Database Configuration
# 数据库配置
###########################################
# PostgreSQL database connection URL
# PostgreSQL数据库连接URL
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://textloom_user:your_password@localhost:5432/textloom_db

# Database connection pool settings
# 数据库连接池设置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=0
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
CELERY_DATABASE_POOL_SIZE=12


###########################################
# Redis Configuration
# Redis配置
###########################################
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=30
REDIS_SOCKET_CONNECT_TIMEOUT=30

###########################################
# Celery Configuration
# Celery配置
###########################################
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_MEMORY_PER_CHILD=200000
CELERY_BROKER_CONNECTION_RETRY_ON_STARTUP=true

###########################################
# AI Service Configuration
# AI服务配置
###########################################
# OpenAI-compatible API configuration
# OpenAI兼容格式的API配置（支持OpenAI、DeepSeek、Qwen等）
OPENAI_API_KEY=your-openai-api-key
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL_NAME=Qwen/Qwen2.5-VL-72B-Instruct
SCRIPT_MODEL_NAME=deepseek-chat

# Image analysis configuration
# 图片分析配置
IMAGE_ANALYSIS_MODEL_NAME=Qwen/Qwen2.5-VL-72B-Instruct

###########################################
# Video Generation - Editly Engine
# 视频生成 - Editly 引擎
###########################################
# Editly executable path (leave empty for auto-detection)
# Editly可执行文件路径（留空自动查找）
EDITLY_EXECUTABLE_PATH=

# Fast mode (skip some quality checks)
# 快速模式（跳过部分质量检查）
EDITLY_FAST_MODE=true

# Video default parameters
# 视频默认参数
VIDEO_DEFAULT_FPS=30
VIDEO_DEFAULT_ASPECT=9:16
VIDEO_DEFAULT_WIDTH=1080
VIDEO_DEFAULT_HEIGHT=1920
VIDEO_DEFAULT_PAGE_MODE=4
VIDEO_DEFAULT_MATTING=1

# Video title and subtitle configuration
# 视频标题和字幕配置
VIDEO_TITLE_ENABLED=true
VIDEO_SUBTITLE_ENABLED=true
VIDEO_SUBTITLE_TEXT=本视频由TEXTLOOM抓取和生成

# TTS (Text-to-Speech) Configuration
# TTS（文本转语音）配置
TTS_ENABLED=true
TTS_VOICE=zh-CN-XiaoxiaoNeural
# Available voices: zh-CN-XiaoxiaoNeural (女声), zh-CN-YunxiNeural (男声), zh-CN-YunyangNeural (男声新闻)
# 可用语音：zh-CN-XiaoxiaoNeural（女声），zh-CN-YunxiNeural（男声），zh-CN-YunyangNeural（男声新闻）
TTS_RATE=+0%
# Rate range: -50% to +100% (negative = slower, positive = faster)
# 语速范围：-50% 到 +100%（负值 = 更慢，正值 = 更快）
TTS_VOLUME=+0%
# Volume range: -50% to +50%
# 音量范围：-50% 到 +50%
TTS_AUDIO_FORMAT=audio-24khz-48kbitrate-mono-mp3
# Supported formats: audio-24khz-48kbitrate-mono-mp3, audio-24khz-96kbitrate-mono-mp3
# 支持的格式：audio-24khz-48kbitrate-mono-mp3, audio-24khz-96kbitrate-mono-mp3

###########################################
# Digital Human and Voice Configuration
# 数字人和语音配置
###########################################
DIGITAL_HUMAN_ENTITY_ID=
DIGITAL_HUMAN_NAME=数字人
DIGITAL_HUMAN_COVER=

VOICE_ENTITY_ID=
VOICE_NAME=
VOICE_ID=0
VOICE_TYPE=0

###########################################
# Background Configuration
# 背景配置
###########################################
BACKGROUND_IMAGE_URL=

###########################################
# Subtitle Style Configuration
# 字幕样式配置
###########################################
SUBTITLE_ENABLE=false
SUBTITLE_COLOR=#ffffff
SUBTITLE_FONT_NAME=DejaVu Sans
SUBTITLE_FONT_SIZE=76.8
SUBTITLE_WIDTH=1079.4666666666667
SUBTITLE_HEIGHT=85.33333333333333
SUBTITLE_X=0
SUBTITLE_Y=1706.6666666666667
SUBTITLE_DEPTH=500
SUBTITLE_BORDER_STYLE=true
SUBTITLE_OUTLINE=0
SUBTITLE_OUTLINE_COLOR=#3B3B3B

###########################################
# Storage Configuration
# 存储配置
###########################################
# Storage type: local, minio, huawei_obs
# 存储类型：local, minio, huawei_obs
STORAGE_TYPE=local

# MinIO configuration (if using MinIO)
# MinIO配置（如果使用MinIO）
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=your-minio-access-key
MINIO_SECRET_KEY=your-minio-secret-key
MINIO_BUCKET_NAME=textloom-storage
MINIO_DOMAIN_NAME=
MINIO_SECURE=false
# MinIO timeout configuration (optional)
# MinIO超时配置（可选）
MINIO_CONNECT_TIMEOUT=5.0
MINIO_READ_TIMEOUT=20.0
MINIO_MAX_POOL_SIZE=10

# Huawei OBS configuration (if using Huawei Cloud)
# 华为云OBS配置（如果使用华为云）
OBS_ACCESS_KEY=your-obs-access-key
OBS_SECRET_KEY=your-obs-secret-key
OBS_ENDPOINT=obs.cn-north-4.myhuaweicloud.com
OBS_BUCKET=textloom-bucket
OBS_DOMAIN_NAME=
###########################################
# File Upload Configuration
# 文件上传配置
###########################################
MAX_FILE_SIZE=52428800
# Maximum file size in bytes (50MB default)

MAX_IMAGES_PER_TASK=20
MAX_VIDEOS_PER_TASK=5

DOWNLOAD_TIMEOUT=30

###########################################
# Task Processing Configuration
# 任务处理配置
###########################################
# Task polling and processing settings
# 任务轮询和处理设置
TASK_POLLING_INTERVAL=5
TASK_TIMEOUT=3600
MAX_CONCURRENT_TASKS=3

# Multi-video generation
# 多视频生成
MULTI_VIDEO_GENERATION_ENABLED=true
MULTI_VIDEO_COUNT=3
MULTI_VIDEO_GENERATION_TIMEOUT=1800

###########################################
# Dynamic Subtitle Configuration
# 动态字幕配置
###########################################
# Enable dynamic subtitle generation
# 启用动态字幕生成功能
DYNAMIC_SUBTITLE_ENABLED=true

# Subtitle style configuration
# 字幕样式配置
DYNAMIC_SUBTITLE_STYLE=default
DYNAMIC_SUBTITLE_ANIMATION=fade_in
DYNAMIC_SUBTITLE_FONT_SIZE=24
DYNAMIC_SUBTITLE_FONT_COLOR=#FFFFFF

# Available styles: default, modern, elegant, bold, neon
# 可用样式：default, modern, elegant, bold, neon
# Available animations: fade_in, slide_up, zoom_in, typewriter
# 可用动画：fade_in, slide_up, zoom_in, typewriter

###########################################
# Logging Configuration
# 日志配置
###########################################
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

LOG_FILE=logs/app.log

###########################################
# Monitoring Configuration
# 监控配置
###########################################

###########################################
# Development Configuration
# 开发配置
###########################################
# Only used in development environment
# 仅用于开发环境



###########################################
# Setup Instructions
# 设置说明
###########################################
# 复制为 .env 后，至少需要设置：
# After copying to .env, you must set at least:
# - SECRET_KEY（JWT认证密钥，使用 openssl rand -hex 32 生成）
# - DATABASE_URL
# - REDIS_HOST / REDIS_PORT / REDIS_PASSWORD（如使用 Redis/Celery）
# - OPENAI_API_KEY 和 OPENAI_API_BASE（支持OpenAI兼容格式的任意模型服务）
# - EDITLY_EXECUTABLE_PATH（可选，留空自动查找 Editly）

# 首次部署后，使用以下命令创建超级用户：
# After first deployment, create a superuser with:
# uv run python scripts/create_superuser.py

###########################################
# Monitoring and Metrics Configuration
# 监控和指标配置
###########################################
# Prometheus multiprocess collector directory (required for metrics collection)
# Prometheus多进程收集器目录（指标收集必需）
# NOTE: This is required by prometheus_client library, do NOT remove even if not in config.py
# 注意：这是prometheus_client库必需的，即使config.py中没有也不要删除
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus